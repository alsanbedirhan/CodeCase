@model IEnumerable<DBConnection.Models.cs_ConfigData>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<p>
    <a asp-action="Create">Ekle</a>
</p>
<hr />
<input id="filterInput" type="text" placeholder="İsme göre filtrele..." />
<hr />
<table id="grid" class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Id)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Type)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Value)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ApplicationName)
            </th>
            @*  <th>
                    @Html.DisplayNameFor(model => model.IsActive)
                </th>*@
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Id)
                </td>
                <td data-col="name">
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Type)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Value)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ApplicationName)
                </td>
                @*  <td>
                        @Html.DisplayFor(modelItem => item.IsActive)
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.Id">Düzenle</a> |
                        <a asp-action="Details" asp-route-id="@item.Id">Detay</a> |
                        <a asp-action="Delete" asp-route-id="@item.Id">Sil</a>
                    </td>*@
                <td>
                    <a asp-action="Details" asp-route-id="@item.Id">Detay</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const input = document.getElementById("filterInput");
        const rows = document.querySelectorAll("#grid tbody tr");

        input.addEventListener("input", function () {
            const search = input.value.trim().toLowerCase();

            rows.forEach(row => {
                const nameCell = row.querySelector('[data-col="name"]');
                if (!nameCell) return;

                const text = nameCell.textContent.trim().toLowerCase();
                row.style.display = text.includes(search) ? "" : "none";
            });
        });
    });
</script>